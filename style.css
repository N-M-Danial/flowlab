/* ============================================================
   KL Traffic LOS Dashboard — Stylesheet
   Pixel-perfect match to original KL_Traffic_LOS_17Feb2026.html
   ============================================================ */

* { margin:0; padding:0; box-sizing:border-box; }

body {
  background:#0d1117; color:#e6edf3;
  font-family:'Segoe UI',system-ui,sans-serif;
  height:100vh; display:flex; flex-direction:column;
}

/* ── Header ─────────────────────────────────────────────────── */
#header {
  background:#161b22; border-bottom:1px solid #30363d;
  padding:12px 20px; display:flex; align-items:center;
  justify-content:space-between; flex-shrink:0; z-index:1000;
}
#header h1 { font-size:25px; font-weight:600; color:#f0f6fc; letter-spacing:0.3px; }
.subtitle  { font-size:12px; color:#8b949e; margin-top:2px; }

/* ── Map ─────────────────────────────────────────────────────── */
#map { flex:1; background:#1a1f2e; height:100%; }

/* ── Bottom panel ────────────────────────────────────────────── */
#bottom-panel {
  background:#161b22; border-top:1px solid #30363d;
  padding:14px 20px 16px; flex-shrink:0; z-index:1000;
}
#time-display { display:flex; align-items:center; justify-content:space-between; margin-bottom:10px; }
#current-time { font-size:22px; font-weight:700; color:#d9fbfc; font-variant-numeric:tabular-nums; min-width:110px; }
#play-controls { display:flex; align-items:center; gap:8px; }

button {
  background:#21262d; border:1px solid #30363d; color:#e6edf3;
  border-radius:6px; cursor:pointer; font-size:13px; padding:5px 12px;
  transition:background 0.15s;
}
button:hover { background:#30363d; }
button.active { background:#1f6feb; border-color:#388bfd; }

#speed-label { font-size:12px; color:#8b949e; }

#hour-slider {
  width:100%; -webkit-appearance:none; appearance:none;
  height:6px; border-radius:3px; background:#21262d; outline:none; cursor:pointer;
}
#hour-slider::-webkit-slider-thumb {
  -webkit-appearance:none; width:18px; height:18px; border-radius:50%;
  background:#00c853; cursor:pointer; border:2px solid #161b22;
  box-shadow:0 0 0 3px rgba(88,166,255,0.25);
}
#hour-slider::-moz-range-thumb {
  width:18px; height:18px; border-radius:50%;
  background:#00c853; cursor:pointer; border:2px solid #161b22;
}

#tick-labels { display:flex; justify-content:space-between; margin-top:6px; padding:0 1px; }
.tick       { font-size:10px; color:#484f58; }
.tick.major { color:#8b949e; }

/* ── Legend ──────────────────────────────────────────────────── */
#legend {
  position:absolute; top:12px; right:12px;
  background:rgba(22,27,34,0.95); border:1px solid #30363d;
  border-radius:8px; padding:12px 14px; z-index:500; min-width:185px;
  backdrop-filter:blur(8px);
}
#legend h3 {
  font-size:11px; font-weight:600; color:#8b949e;
  text-transform:uppercase; letter-spacing:0.8px; margin-bottom:10px;
}
.los-item   { display:flex; align-items:center; gap:8px; margin-bottom:6px; }
.los-swatch { width:28px; height:6px; border-radius:3px; flex-shrink:0; }
.los-label  { font-size:12px; color:#e6edf3; }
.los-grade  { font-weight:700; font-size:13px; min-width:16px; }

/* ── Tile status ─────────────────────────────────────────────── */
#tile-status {
  position:absolute; bottom:8px; left:50%; transform:translateX(-50%);
  background:rgba(22,27,34,0.85); border:1px solid #30363d; border-radius:6px;
  padding:4px 10px; font-size:11px; color:#8b949e; z-index:500;
  display:none;
}

/* ── Summary badges (header) ─────────────────────────────────── */
.sum-badge {
  display:flex; align-items:center; gap:5px;
  background:rgba(22,27,34,0.9); border:1px solid #30363d;
  border-radius:6px; padding:4px 8px; font-size:11px;
}
.sum-dot   { width:8px; height:8px; border-radius:50%; flex-shrink:0; }
.sum-count { font-weight:700; color:#f0f6fc; }
.sum-grade { color:#8b949e; }

/* ── Main content row ────────────────────────────────────────── */
#main-row {
  position:relative; flex:1;
  display:flex; flex-direction:row;
  overflow:hidden; height:100%;
}

/* ── Side panel (left) ───────────────────────────────────────── */
#side-panel {
  width:220px; min-width:220px;
  background:#161b22; border-right:1px solid #30363d;
  display:flex; flex-direction:column;
  overflow:hidden; z-index:10; flex-shrink:0;
}
#side-header {
  padding:10px 12px 8px;
  font-size:11px; font-weight:700; color:#f0f6fc;
  text-transform:uppercase; letter-spacing:0.7px;
  border-bottom:1px solid #30363d;
  display:flex; justify-content:space-between; align-items:center;
  flex-shrink:0;
}
#road-list { flex:1; overflow-y:auto; padding:6px 0; }
#road-list::-webkit-scrollbar       { width:4px; }
#road-list::-webkit-scrollbar-track { background:transparent; }
#road-list::-webkit-scrollbar-thumb { background:#30363d; border-radius:2px; }

.road-row {
  padding:5px 10px; cursor:pointer;
  transition:background 0.1s;
  border-left:3px solid transparent;
}
.road-row:hover  { background:#1c2128; }
.road-row.active { background:#1c2128; border-left-color:#58a6ff; }

.road-row-top {
  display:flex; align-items:center;
  justify-content:space-between; margin-bottom:3px;
}
.road-name-txt {
  font-size:11px; font-weight:600; color:#e6edf3;
  white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
  max-width:130px;
}
.road-los-badge {
  font-size:10px; font-weight:700; color:#0d1117;
  padding:1px 5px; border-radius:3px; flex-shrink:0;
}
.road-vc-bar-wrap { display:flex; align-items:center; gap:5px; }
.road-vc-bar-bg   { flex:1; height:4px; background:#21262d; border-radius:2px; overflow:hidden; }
.road-vc-bar-fill { height:100%; border-radius:2px; transition:width 0.3s, background 0.3s; }
.road-vc-txt      { font-size:9px; color:#8b949e; min-width:28px; text-align:right; flex-shrink:0; }
.road-spark       { display:block; margin-top:3px; }

/* ── Peak Hour Detection panel (right) ───────────────────────── */
/* ── Peak Hour Detection panel (below legend, absolute overlay) ── */
#peak-panel {
  position:absolute; top:12px; right:12px;
  margin-top:246px;
  width:212px;
  background:rgba(22,27,34,0.95); border:1px solid #30363d;
  border-radius:8px; z-index:500;
  backdrop-filter:blur(8px);
  display:flex; flex-direction:column;
  max-height:calc(100% - 290px);
  overflow:hidden;
}
#peak-header {
  padding:10px 14px 8px;
  font-size:11px; font-weight:600; color:#8b949e;
  text-transform:uppercase; letter-spacing:0.8px;
  border-bottom:1px solid #30363d;
  flex-shrink:0;
}
#peak-list {
  overflow-y:auto; padding:4px 0;
}
#peak-list::-webkit-scrollbar       { width:4px; }
#peak-list::-webkit-scrollbar-track { background:transparent; }
#peak-list::-webkit-scrollbar-thumb { background:#30363d; border-radius:2px; }

.peak-row {
  padding:8px 12px;
  border-bottom:1px solid #21262d;
  cursor:pointer; transition:background 0.1s;
  border-left:3px solid transparent;
}
.peak-row:hover  { background:#1c2128; }
.peak-row.active { background:#1c2128; border-left-color:#58a6ff; }

.peak-road-name {
  font-size:11px; font-weight:600; color:#e6edf3;
  white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
  margin-bottom:5px;
}
.peak-details {
  display:flex; align-items:center; justify-content:space-between; gap:6px;
}
.peak-time {
  font-size:12px; font-weight:700; color:#d9fbfc;
  font-variant-numeric:tabular-nums;
}
.peak-vc {
  font-size:10px; color:#8b949e;
}
.peak-los-badge {
  font-size:10px; font-weight:700; color:#0d1117;
  padding:2px 6px; border-radius:3px; flex-shrink:0;
}

/* rank indicator — subtle position number */
.peak-rank {
  font-size:9px; color:#484f58;
  margin-bottom:2px;
}

/* Side legend dots (inside side panel) */
.leg-row { display:flex; align-items:center; gap:4px; }
.leg-dot { width:7px; height:7px; border-radius:50%; flex-shrink:0; }
.leg-txt { font-size:9px; color:#8b949e; white-space:nowrap; }

/* ── Upload button ───────────────────────────────────────────── */
#upload-wrap { display:flex; align-items:center; gap:6px; }

#btn-upload {
  background:#21262d; border:1px solid #388bfd; color:#58a6ff;
  font-size:12px; padding:4px 10px;
}
#btn-upload:hover { background:#1f6feb; color:#fff; }

#upload-status {
  font-size:11px; color:#8b949e; max-width:180px;
  white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
}
#upload-status.ok  { color:#00c853; }
#upload-status.err { color:#ff3d00; }

/* ── Predict button ───────────────────────────────────────────── */
#btn-predict {
  background: #21262d;
  border: 1px solid #6e40c9;
  color: #d2a8ff;
  font-size: 12px;
  padding: 4px 10px;
}
#btn-predict:hover { background: #2d1f4e; }

/* ── Loading overlay ─────────────────────────────────────────── */
#loading-overlay {
  position:absolute; inset:0;
  background:rgba(13,17,23,0.85);
  display:flex; align-items:center; justify-content:center;
  z-index:9999;
}
#loading-box {
  display:flex; flex-direction:column; align-items:center; gap:14px;
}
#loading-spinner {
  width:36px; height:36px; border-radius:50%;
  border:3px solid #30363d;
  border-top-color:#58a6ff;
  animation:spin 0.8s linear infinite;
}
@keyframes spin { to { transform:rotate(360deg); } }
#loading-text { font-size:13px; color:#8b949e; }





/* ── Predicted Mode Theme ────────────────────────────────────── */
body.predicted-mode #header {
  background: #1a1130;
  border-bottom-color: #6e40c9;
}

body.predicted-mode #header h1 {
  color: #d2a8ff;
}

body.predicted-mode #bottom-panel {
  background: #1a1130;
  border-top-color: #6e40c9;
}

body.predicted-mode #side-panel {
  background: #1a1130;
  border-right-color: #6e40c9;
}

body.predicted-mode #side-header {
  border-bottom-color: #6e40c9;
}

body.predicted-mode #legend,
body.predicted-mode #peak-panel {
  background: rgba(26, 17, 48, 0.95);
  border-color: #6e40c9;
}

body.predicted-mode #map {
  background: #160d2e;
}

/* Pulsing purple banner to make predicted mode unmissable */
body.predicted-mode #header::after {
  content: 'AI PREDICTED VIEW (NEXT DAY FORECAST)';
  display: block;
  position: absolute;
  top: 0; left: 50%; transform: translateX(-50%);
  background: #6e40c9;
  color: #fff;
  font-size: 10px;
  font-weight: 700;
  letter-spacing: 1px;
  padding: 2px 14px;
  border-radius: 0 0 6px 6px;
  z-index: 1001;
  animation: predicted-pulse 2s ease-in-out infinite;
}

@keyframes predicted-pulse {
  0%, 100% { opacity: 1; }
  50%       { opacity: 0.6; }
}

/* Make #header position:relative so ::after positions correctly */
body.predicted-mode #header {
  position: relative;
}

body.predicted-mode #btn-predict {
  background: #6e40c9;
  border-color: #9a6fdb;
  color: #fff;
}
